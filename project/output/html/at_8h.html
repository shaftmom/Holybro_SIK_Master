<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: C:/project/Firmware/radio/at.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project<span id="projectnumber">&#160;0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('at_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">at.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="at_8h__dep__incl.png" border="0" usemap="#a_c_1_2project_2_firmware_2radio_2at_8hdep" alt=""/></div>
<map name="a_c_1_2project_2_firmware_2radio_2at_8hdep" id="a_c_1_2project_2_firmware_2radio_2at_8hdep">
<area shape="rect" title=" " alt="" coords="723,5,857,47"/>
<area shape="rect" href="at_8c.html" title=" " alt="" coords="5,184,140,225"/>
<area shape="rect" href="radio_8h.html" title=" " alt="" coords="1361,95,1496,136"/>
<area shape="rect" href="_a_e_s__defs_8h.html" title=" " alt="" coords="2363,184,2521,225"/>
<area shape="rect" href="aes_8c.html" title=" " alt="" coords="2568,385,2703,426"/>
<area shape="rect" href="crc_8c.html" title=" " alt="" coords="3208,184,3343,225"/>
<area shape="rect" href="radio_2flash_8c.html" title=" " alt="" coords="164,184,299,225"/>
<area shape="rect" href="freq__hopping_8c.html" title=" " alt="" coords="323,184,465,225"/>
<area shape="rect" href="golay_8c.html" title=" " alt="" coords="489,184,624,225"/>
<area shape="rect" href="main_8c.html" title=" " alt="" coords="648,184,783,225"/>
<area shape="rect" href="mavlink_8c.html" title=" " alt="" coords="807,184,941,225"/>
<area shape="rect" href="packet_8c.html" title=" " alt="" coords="965,184,1100,225"/>
<area shape="rect" href="parameters_8c.html" title=" " alt="" coords="1124,184,1259,225"/>
<area shape="rect" href="pins__user_8c.html" title=" " alt="" coords="1283,184,1417,225"/>
<area shape="rect" href="printfl_8c.html" title=" " alt="" coords="1441,184,1576,225"/>
<area shape="rect" href="radio__443x_8c.html" title=" " alt="" coords="1600,184,1735,225"/>
<area shape="rect" href="rtc_8c.html" title=" " alt="" coords="1759,184,1893,225"/>
<area shape="rect" href="serial_8h.html" title=" " alt="" coords="1917,184,2052,225"/>
<area shape="rect" href="tdm_8c.html" title=" " alt="" coords="1841,281,1976,322"/>
<area shape="rect" href="timer_8c.html" title=" " alt="" coords="2128,184,2263,225"/>
<area shape="rect" href="_a_e_s___block_cipher_8c.html" title=" " alt="" coords="1957,385,2161,426"/>
<area shape="rect" href="_a_e_s___block_cipher_8h.html" title=" " alt="" coords="2103,281,2307,322"/>
<area shape="rect" href="_c_b_c___encrypt_decrypt_8c.html" title=" " alt="" coords="2727,385,2951,426"/>
<area shape="rect" href="_c_b_c___encrypt_decrypt_8h.html" title=" " alt="" coords="2578,281,2802,322"/>
<area shape="rect" href="_c_t_r___encrypt_decrypt_8c.html" title=" " alt="" coords="2276,385,2499,426"/>
<area shape="rect" href="_c_t_r___encrypt_decrypt_8h.html" title=" " alt="" coords="2331,281,2553,322"/>
<area shape="rect" href="_generate_decryption_key_8c.html" title=" " alt="" coords="2996,377,3200,433"/>
<area shape="rect" href="_generate_decryption_key_8h.html" title=" " alt="" coords="2877,273,3081,329"/>
<area shape="rect" href="serial_8c.html" title=" " alt="" coords="1683,281,1817,322"/>
</map>
</div>
</div>
<p><a href="at_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3982e7249b50fd4656b9418351eb6cdd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#a3982e7249b50fd4656b9418351eb6cdd">AT_TEST_RSSI</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a3982e7249b50fd4656b9418351eb6cdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005aef32a8f5a1011b29bbc1def9352f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#a005aef32a8f5a1011b29bbc1def9352f">AT_TEST_TDM</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a005aef32a8f5a1011b29bbc1def9352f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2865f9a4b565a3471f24e65beb540ca3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#a2865f9a4b565a3471f24e65beb540ca3">AT_CMD_MAXLEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a2865f9a4b565a3471f24e65beb540ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a53dee99a19080dacf6a8d0bb9e4f363c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#a53dee99a19080dacf6a8d0bb9e4f363c">at_timer</a> (void)</td></tr>
<tr class="separator:a53dee99a19080dacf6a8d0bb9e4f363c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a88fb008ed83c048103a284f238c233"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#a3a88fb008ed83c048103a284f238c233">at_plus_detector</a> (register uint8_t c)</td></tr>
<tr class="separator:a3a88fb008ed83c048103a284f238c233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed1a02faa3672eac5629a1fc5dca1f34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#aed1a02faa3672eac5629a1fc5dca1f34">at_input</a> (register uint8_t c)</td></tr>
<tr class="separator:aed1a02faa3672eac5629a1fc5dca1f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57bbd7488dd36489f932139ca5a51ae5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#a57bbd7488dd36489f932139ca5a51ae5">at_command</a> (void)</td></tr>
<tr class="separator:a57bbd7488dd36489f932139ca5a51ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5038e1fea7c7cdf587ff60181132e264"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#a5038e1fea7c7cdf587ff60181132e264">at_mode_active</a></td></tr>
<tr class="memdesc:a5038e1fea7c7cdf587ff60181132e264"><td class="mdescLeft">&#160;</td><td class="mdescRight">if true, the AT interpreter is in command mode  <a href="at_8h.html#a5038e1fea7c7cdf587ff60181132e264">More...</a><br /></td></tr>
<tr class="separator:a5038e1fea7c7cdf587ff60181132e264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac8a82c271daff8c5b330ebcd38ee43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#adac8a82c271daff8c5b330ebcd38ee43">at_cmd_ready</a></td></tr>
<tr class="memdesc:adac8a82c271daff8c5b330ebcd38ee43"><td class="mdescLeft">&#160;</td><td class="mdescRight">if true, at_cmd / at_cmd_len contain valid data  <a href="at_8h.html#adac8a82c271daff8c5b330ebcd38ee43">More...</a><br /></td></tr>
<tr class="separator:adac8a82c271daff8c5b330ebcd38ee43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb7a227e58b2b7f0c3d7a3d4b101b74"><td class="memItemLeft" align="right" valign="top">__pdata uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#acdb7a227e58b2b7f0c3d7a3d4b101b74">at_testmode</a></td></tr>
<tr class="memdesc:acdb7a227e58b2b7f0c3d7a3d4b101b74"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT_TEST_* test modes.  <a href="at_8h.html#acdb7a227e58b2b7f0c3d7a3d4b101b74">More...</a><br /></td></tr>
<tr class="separator:acdb7a227e58b2b7f0c3d7a3d4b101b74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb257db0c8aea4d68b9548d31ed90871"><td class="memItemLeft" align="right" valign="top">__xdata char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a> [<a class="el" href="at_8h.html#a2865f9a4b565a3471f24e65beb540ca3">AT_CMD_MAXLEN</a>+1]</td></tr>
<tr class="separator:aeb257db0c8aea4d68b9548d31ed90871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf6209395976e983a53864bfc4b77deb"><td class="memItemLeft" align="right" valign="top">__pdata uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at_8h.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a></td></tr>
<tr class="separator:acf6209395976e983a53864bfc4b77deb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Prototypes for the AT command parser </p>

<p class="definition">Definition in file <a class="el" href="at_8h_source.html">at.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a2865f9a4b565a3471f24e65beb540ca3" name="a2865f9a4b565a3471f24e65beb540ca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2865f9a4b565a3471f24e65beb540ca3">&#9670;&nbsp;</a></span>AT_CMD_MAXLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT_CMD_MAXLEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="at_8h_source.html#l00081">81</a> of file <a class="el" href="at_8h_source.html">at.h</a>.</p>

</div>
</div>
<a id="a3982e7249b50fd4656b9418351eb6cdd" name="a3982e7249b50fd4656b9418351eb6cdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3982e7249b50fd4656b9418351eb6cdd">&#9670;&nbsp;</a></span>AT_TEST_RSSI</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT_TEST_RSSI&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="at_8h_source.html#l00074">74</a> of file <a class="el" href="at_8h_source.html">at.h</a>.</p>

</div>
</div>
<a id="a005aef32a8f5a1011b29bbc1def9352f" name="a005aef32a8f5a1011b29bbc1def9352f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a005aef32a8f5a1011b29bbc1def9352f">&#9670;&nbsp;</a></span>AT_TEST_TDM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT_TEST_TDM&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="at_8h_source.html#l00075">75</a> of file <a class="el" href="at_8h_source.html">at.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a57bbd7488dd36489f932139ca5a51ae5" name="a57bbd7488dd36489f932139ca5a51ae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57bbd7488dd36489f932139ca5a51ae5">&#9670;&nbsp;</a></span>at_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at_command </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Check for and execute AT commands</p>
<p >Call this from non-interrupt context when it's safe for an AT command to be executed. It's cheap if at_mode_active is false. </p>

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00217">217</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  218</span>{</div>
<div class="line"><span class="lineno">  219</span>    <span class="comment">// require a command with the AT prefix</span></div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="at_8c.html#adac8a82c271daff8c5b330ebcd38ee43">at_cmd_ready</a>) {</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">if</span> ((<a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a> &gt;= 2) &amp;&amp; (<a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[0] == <span class="charliteral">&#39;R&#39;</span>) &amp;&amp; (<a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[1] == <span class="charliteral">&#39;T&#39;</span>)) {</div>
<div class="line"><span class="lineno">  222</span>            <span class="comment">// remote AT command - send it to the tdm</span></div>
<div class="line"><span class="lineno">  223</span>            <span class="comment">// system to send to the remote radio</span></div>
<div class="line"><span class="lineno">  224</span>            <a class="code hl_function" href="tdm_8c.html#a8643f34e05656a939fa482c6a99162ed">tdm_remote_at</a>();</div>
<div class="line"><span class="lineno">  225</span>            <a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a> = 0;</div>
<div class="line"><span class="lineno">  226</span>            <a class="code hl_variable" href="at_8c.html#adac8a82c271daff8c5b330ebcd38ee43">at_cmd_ready</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  227</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  228</span>        }</div>
<div class="line"><span class="lineno">  229</span>        </div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">if</span> ((<a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a> &gt;= 2) &amp;&amp; (<a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[0] == <span class="charliteral">&#39;A&#39;</span>) &amp;&amp; (<a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[1] == <span class="charliteral">&#39;T&#39;</span>)) {</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>            <span class="comment">// look at the next byte to determine what to do</span></div>
<div class="line"><span class="lineno">  233</span>            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[2]) {</div>
<div class="line"><span class="lineno">  234</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;\0&#39;</span>:      <span class="comment">// no command -&gt; OK</span></div>
<div class="line"><span class="lineno">  235</span>                <a class="code hl_function" href="at_8c.html#a351cb6c529aa4ce69c6e348f4cdf8f4c">at_ok</a>();</div>
<div class="line"><span class="lineno">  236</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  237</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;&amp;&#39;</span>:</div>
<div class="line"><span class="lineno">  238</span>                <a class="code hl_function" href="at_8c.html#a7bc6c8d59590d26ec9e279a9944dbcee">at_ampersand</a>();</div>
<div class="line"><span class="lineno">  239</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  240</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>:</div>
<div class="line"><span class="lineno">  241</span>                <a class="code hl_function" href="at_8c.html#a7cbf9feba4fd3d5e4e50f45391d20342">at_plus</a>();</div>
<div class="line"><span class="lineno">  242</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  243</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;I&#39;</span>:</div>
<div class="line"><span class="lineno">  244</span>                <a class="code hl_function" href="at_8c.html#a464e0605e465965be05e97aa1b26ccbf">at_i</a>();</div>
<div class="line"><span class="lineno">  245</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  246</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;P&#39;</span>:</div>
<div class="line"><span class="lineno">  247</span>                <a class="code hl_function" href="at_8c.html#a41fff475abfe8490e0b68d8ffacd958b">at_p</a>();</div>
<div class="line"><span class="lineno">  248</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  249</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;O&#39;</span>:       <span class="comment">// O -&gt; go online (exit command mode)</span></div>
<div class="line"><span class="lineno">  250</span>                <a class="code hl_variable" href="at_8c.html#aa64e2f68727608b9e71d290d3aeeed0c">at_plus_counter</a> = <a class="code hl_define" href="at_8c.html#ac307ffc861c0b735fc16f4d8780844c6">ATP_COUNT_1S</a>;</div>
<div class="line"><span class="lineno">  251</span>                <a class="code hl_variable" href="at_8c.html#a5038e1fea7c7cdf587ff60181132e264">at_mode_active</a> = 0;</div>
<div class="line"><span class="lineno">  252</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  253</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>:</div>
<div class="line"><span class="lineno">  254</span>                <a class="code hl_function" href="at_8c.html#a82ca39c73044b0e52a1cb405cc47faea">at_s</a>();</div>
<div class="line"><span class="lineno">  255</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  256</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;Z&#39;</span>:</div>
<div class="line"><span class="lineno">  257</span>                <span class="comment">// generate a software reset</span></div>
<div class="line"><span class="lineno">  258</span>                RSTSRC |= (1 &lt;&lt; 4);</div>
<div class="line"><span class="lineno">  259</span>                <span class="keywordflow">for</span> (;;)</div>
<div class="line"><span class="lineno">  260</span>                    ;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  263</span>                <a class="code hl_function" href="at_8c.html#a17fcc48237ed17df8299e890c02c9421">at_error</a>();</div>
<div class="line"><span class="lineno">  264</span>            }</div>
<div class="line"><span class="lineno">  265</span>        }</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>        <span class="comment">// unlock the command buffer</span></div>
<div class="line"><span class="lineno">  268</span>        <a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a> = 0;</div>
<div class="line"><span class="lineno">  269</span>        <a class="code hl_variable" href="at_8c.html#adac8a82c271daff8c5b330ebcd38ee43">at_cmd_ready</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  270</span>    }</div>
<div class="line"><span class="lineno">  271</span>}</div>
<div class="ttc" id="aat_8c_html_a17fcc48237ed17df8299e890c02c9421"><div class="ttname"><a href="at_8c.html#a17fcc48237ed17df8299e890c02c9421">at_error</a></div><div class="ttdeci">static void at_error(void)</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00280">at.c:280</a></div></div>
<div class="ttc" id="aat_8c_html_a351cb6c529aa4ce69c6e348f4cdf8f4c"><div class="ttname"><a href="at_8c.html#a351cb6c529aa4ce69c6e348f4cdf8f4c">at_ok</a></div><div class="ttdeci">static void at_ok(void)</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00274">at.c:274</a></div></div>
<div class="ttc" id="aat_8c_html_a41fff475abfe8490e0b68d8ffacd958b"><div class="ttname"><a href="at_8c.html#a41fff475abfe8490e0b68d8ffacd958b">at_p</a></div><div class="ttdeci">static void at_p(void)</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00464">at.c:464</a></div></div>
<div class="ttc" id="aat_8c_html_a464e0605e465965be05e97aa1b26ccbf"><div class="ttname"><a href="at_8c.html#a464e0605e465965be05e97aa1b26ccbf">at_i</a></div><div class="ttdeci">static void at_i(void)</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00323">at.c:323</a></div></div>
<div class="ttc" id="aat_8c_html_a5038e1fea7c7cdf587ff60181132e264"><div class="ttname"><a href="at_8c.html#a5038e1fea7c7cdf587ff60181132e264">at_mode_active</a></div><div class="ttdeci">bool at_mode_active</div><div class="ttdoc">if true, incoming bytes are for AT command</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00055">at.c:55</a></div></div>
<div class="ttc" id="aat_8c_html_a7bc6c8d59590d26ec9e279a9944dbcee"><div class="ttname"><a href="at_8c.html#a7bc6c8d59590d26ec9e279a9944dbcee">at_ampersand</a></div><div class="ttdeci">static void at_ampersand(void)</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00393">at.c:393</a></div></div>
<div class="ttc" id="aat_8c_html_a7cbf9feba4fd3d5e4e50f45391d20342"><div class="ttname"><a href="at_8c.html#a7cbf9feba4fd3d5e4e50f45391d20342">at_plus</a></div><div class="ttdeci">static void at_plus(void)</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00528">at.c:528</a></div></div>
<div class="ttc" id="aat_8c_html_a82ca39c73044b0e52a1cb405cc47faea"><div class="ttname"><a href="at_8c.html#a82ca39c73044b0e52a1cb405cc47faea">at_s</a></div><div class="ttdeci">static void at_s(void)</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00358">at.c:358</a></div></div>
<div class="ttc" id="aat_8c_html_aa64e2f68727608b9e71d290d3aeeed0c"><div class="ttname"><a href="at_8c.html#aa64e2f68727608b9e71d290d3aeeed0c">at_plus_counter</a></div><div class="ttdeci">static __pdata uint8_t at_plus_counter</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00140">at.c:140</a></div></div>
<div class="ttc" id="aat_8c_html_ac307ffc861c0b735fc16f4d8780844c6"><div class="ttname"><a href="at_8c.html#ac307ffc861c0b735fc16f4d8780844c6">ATP_COUNT_1S</a></div><div class="ttdeci">#define ATP_COUNT_1S</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00137">at.c:137</a></div></div>
<div class="ttc" id="aat_8c_html_acf6209395976e983a53864bfc4b77deb"><div class="ttname"><a href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a></div><div class="ttdeci">__pdata uint8_t at_cmd_len</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00052">at.c:52</a></div></div>
<div class="ttc" id="aat_8c_html_adac8a82c271daff8c5b330ebcd38ee43"><div class="ttname"><a href="at_8c.html#adac8a82c271daff8c5b330ebcd38ee43">at_cmd_ready</a></div><div class="ttdeci">bool at_cmd_ready</div><div class="ttdoc">if true, at_cmd / at_cmd_len contain valid data</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00056">at.c:56</a></div></div>
<div class="ttc" id="aat_8c_html_aeb257db0c8aea4d68b9548d31ed90871"><div class="ttname"><a href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a></div><div class="ttdeci">__xdata char at_cmd[AT_CMD_MAXLEN+1]</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00051">at.c:51</a></div></div>
<div class="ttc" id="atdm_8c_html_a8643f34e05656a939fa482c6a99162ed"><div class="ttname"><a href="tdm_8c.html#a8643f34e05656a939fa482c6a99162ed">tdm_remote_at</a></div><div class="ttdeci">void tdm_remote_at(void)</div><div class="ttdoc">dispatch a remote AT command</div><div class="ttdef"><b>Definition:</b> <a href="tdm_8c_source.html#l00457">tdm.c:457</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at_8h_a57bbd7488dd36489f932139ca5a51ae5_cgraph.png" border="0" usemap="#aat_8h_a57bbd7488dd36489f932139ca5a51ae5_cgraph" alt=""/></div>
<map name="aat_8h_a57bbd7488dd36489f932139ca5a51ae5_cgraph" id="aat_8h_a57bbd7488dd36489f932139ca5a51ae5_cgraph">
<area shape="rect" title=" " alt="" coords="5,259,103,285"/>
<area shape="rect" href="at_8c.html#a7bc6c8d59590d26ec9e279a9944dbcee" title=" " alt="" coords="153,81,257,108"/>
<area shape="rect" href="at_8c.html#a17fcc48237ed17df8299e890c02c9421" title=" " alt="" coords="342,208,409,235"/>
<area shape="rect" href="at_8c.html#a351cb6c529aa4ce69c6e348f4cdf8f4c" title=" " alt="" coords="348,157,403,184"/>
<area shape="rect" href="at_8c.html#a464e0605e465965be05e97aa1b26ccbf" title=" " alt="" coords="184,436,227,463"/>
<area shape="rect" href="at_8c.html#a41fff475abfe8490e0b68d8ffacd958b" title=" " alt="" coords="182,183,229,209"/>
<area shape="rect" href="at_8c.html#a7cbf9feba4fd3d5e4e50f45391d20342" title=" " alt="" coords="173,284,237,311"/>
<area shape="rect" href="at_8c.html#a82ca39c73044b0e52a1cb405cc47faea" title=" " alt="" coords="182,335,229,361"/>
<area shape="rect" href="tdm_8c.html#a8643f34e05656a939fa482c6a99162ed" title="dispatch a remote AT command" alt="" coords="151,487,260,513"/>
<area shape="rect" href="parameters_8c.html#ad5ff350fd63fe51eac9b45c956e61f2c" title=" " alt="" coords="324,5,427,32"/>
<area shape="rect" href="parameters_8c.html#a716286cfc8dbc0bc93f392d77a513e53" title=" " alt="" coords="330,107,421,133"/>
<area shape="rect" href="tdm_8c.html#a4aa6d5aa1491949adc4ba0b0747aa5fe" title="change tdm phase (for testing recovery)" alt="" coords="308,56,443,83"/>
<area shape="rect" href="bootloader_2flash_8c.html#ae29c74302a6ff4bc0dfc0490c1af9ef5" title=" " alt="" coords="491,149,629,176"/>
<area shape="rect" href="radio_2flash_8c.html#a1178fcb43ec8df7eade27e3b6dba361e" title=" " alt="" coords="677,48,811,75"/>
<area shape="rect" href="parameters_8c.html#ae72fa33ee91bb363aae2d4325404222d" title=" " alt="" coords="511,99,609,125"/>
<area shape="rect" href="bootloader_2flash_8c.html#a5ba6aa0b78630ac829682c7013cb1dbf" title=" " alt="" coords="687,149,801,176"/>
<area shape="rect" href="radio_2flash_8c.html#a5ba6aa0b78630ac829682c7013cb1dbf" title=" " alt="" coords="859,48,973,75"/>
<area shape="rect" href="crc_8c.html#a2ce6fa6b8d7633c46c8cea8599c798cb" title=" " alt="" coords="717,99,771,125"/>
<area shape="rect" href="parameters_8c.html#a02fd421969b941fa855ecd8aa3453409" title=" " alt="" coords="334,411,417,437"/>
<area shape="rect" href="parameters_8c.html#a78b137d24d8efa8d63ae9e7b0aee493f" title=" " alt="" coords="327,563,424,589"/>
<area shape="rect" href="at_8c.html#a1cc617cf4c65f323d6bbc306e81d098f" title=" " alt="" coords="328,613,423,640"/>
<area shape="rect" href="tdm_8c.html#a6ba3106f3d67ba72e37973e1934ae85b" title=" " alt="" coords="312,461,439,488"/>
<area shape="rect" href="tdm_8c.html#af74d64466f3cff4c2a24c26b3575aadd" title="show RSSI information" alt="" coords="321,512,430,539"/>
<area shape="rect" href="timer_8c.html#a4bd4c9aa97f3fd5a48b7af4994afad99" title=" " alt="" coords="514,535,606,561"/>
<area shape="rect" href="timer_8c.html#a4523c7d7a6e17dda0e9995be19fa398e" title=" " alt="" coords="693,585,795,612"/>
<area shape="rect" href="timer_8c.html#aca21c47b7183002f9fc4cce07c69d8a9" title=" " alt="" coords="705,535,783,561"/>
<area shape="rect" href="radio__443x_8c.html#a835248428497fd5b1a4d31f5d7a2ec86" title=" " alt="" coords="497,585,623,612"/>
<area shape="rect" href="at_8c.html#a367f90bbf144f6d3ffb9bd6a7672ad37" title=" " alt="" coords="314,309,437,336"/>
<area shape="rect" href="radio__443x_8c.html#a9037f06d4da461373fb1d448a84ffa93" title=" " alt="" coords="311,259,440,285"/>
<area shape="rect" href="radio__443x_8c.html#ad4ea06234237630d02dbd750babdb5a6" title=" " alt="" coords="511,251,609,277"/>
<area shape="rect" href="radio__443x_8c.html#a3575c3eb18b3291eb09fabcf767300bf" title=" " alt="" coords="695,308,793,335"/>
<area shape="rect" href="parameters_8c.html#ac88f2d32d01563a3a5cdd0ffe2bd5208" title=" " alt="" coords="334,360,417,387"/>
<area shape="rect" href="parameters_8c.html#a6f7319353e0f5430069b501c51993f93" title="convenient routine to constrain parameter values" alt="" coords="523,301,597,328"/>
<area shape="rect" href="parameters_8c.html#ac055e914a402d0a569ab1df1e0c0d831" title=" " alt="" coords="510,484,610,511"/>
<area shape="rect" href="radio__443x_8c.html#acba02cbe7b4ae9194d73200ab40a3f5f" title=" " alt="" coords="495,353,625,394"/>
<area shape="rect" href="radio__443x_8c.html#ae3bd9460c132a1455c6dfe654ba6eeeb" title=" " alt="" coords="495,418,625,459"/>
<area shape="rect" href="serial_8c.html#aa0e4d3c8f6286cd77877e571f55ce4b2" title=" " alt="" coords="680,469,808,510"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at_8h_a57bbd7488dd36489f932139ca5a51ae5_icgraph.png" border="0" usemap="#aat_8h_a57bbd7488dd36489f932139ca5a51ae5_icgraph" alt=""/></div>
<map name="aat_8h_a57bbd7488dd36489f932139ca5a51ae5_icgraph" id="aat_8h_a57bbd7488dd36489f932139ca5a51ae5_icgraph">
<area shape="rect" title=" " alt="" coords="291,5,388,32"/>
<area shape="rect" href="tdm_8c.html#ad455a2a1cb342bd8b5fc764d2fa8d852" title=" " alt="" coords="5,5,52,32"/>
<area shape="rect" href="tdm_8c.html#a93e0fe632acf3cdaf634c346f5d08e8a" title=" " alt="" coords="100,31,243,57"/>
</map>
</div>

</div>
</div>
<a id="aed1a02faa3672eac5629a1fc5dca1f34" name="aed1a02faa3672eac5629a1fc5dca1f34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed1a02faa3672eac5629a1fc5dca1f34">&#9670;&nbsp;</a></span>at_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at_input </td>
          <td>(</td>
          <td class="paramtype">register uint8_t&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >AT command character input method.</p>
<p >Call this at interrupt time for every incoming character when at_mode_active is true, and don't buffer those characters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>Received character. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00073">73</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   74</span>{</div>
<div class="line"><span class="lineno">   75</span>    <span class="comment">// AT mode is active and waiting for a command</span></div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">switch</span> (c) {</div>
<div class="line"><span class="lineno">   77</span>        <span class="comment">// CR - submits command for processing</span></div>
<div class="line"><span class="lineno">   78</span>    <span class="keywordflow">case</span> <span class="charliteral">&#39;\r&#39;</span>:</div>
<div class="line"><span class="lineno">   79</span>        <a class="code hl_function" href="radio_8h.html#ab3cc91b237b56d9ae053be2ecc2075ca">putchar</a>(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><span class="lineno">   80</span>        <a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[<a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a>] = 0;</div>
<div class="line"><span class="lineno">   81</span>        <a class="code hl_variable" href="at_8c.html#adac8a82c271daff8c5b330ebcd38ee43">at_cmd_ready</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>        <span class="comment">// backspace - delete a character</span></div>
<div class="line"><span class="lineno">   85</span>        <span class="comment">// delete - delete a character</span></div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">case</span> <span class="charliteral">&#39;\b&#39;</span>:</div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">case</span> <span class="stringliteral">&#39;\x7f&#39;</span>:</div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a> &gt; 0) {</div>
<div class="line"><span class="lineno">   89</span>            <a class="code hl_function" href="radio_8h.html#ab3cc91b237b56d9ae053be2ecc2075ca">putchar</a>(<span class="charliteral">&#39;\b&#39;</span>);</div>
<div class="line"><span class="lineno">   90</span>            <a class="code hl_function" href="radio_8h.html#ab3cc91b237b56d9ae053be2ecc2075ca">putchar</a>(<span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><span class="lineno">   91</span>            <a class="code hl_function" href="radio_8h.html#ab3cc91b237b56d9ae053be2ecc2075ca">putchar</a>(<span class="charliteral">&#39;\b&#39;</span>);</div>
<div class="line"><span class="lineno">   92</span>            <a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a>--;</div>
<div class="line"><span class="lineno">   93</span>        }</div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>        <span class="comment">// character - add to buffer if valid</span></div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">   98</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a> &lt; <a class="code hl_define" href="at_8h.html#a2865f9a4b565a3471f24e65beb540ca3">AT_CMD_MAXLEN</a>) {</div>
<div class="line"><span class="lineno">   99</span>            <span class="keywordflow">if</span> (isprint(c)) {</div>
<div class="line"><span class="lineno">  100</span>                c = toupper(c);</div>
<div class="line"><span class="lineno">  101</span>                <a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[<a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a>++] = c;</div>
<div class="line"><span class="lineno">  102</span>                <a class="code hl_function" href="radio_8h.html#ab3cc91b237b56d9ae053be2ecc2075ca">putchar</a>(c);</div>
<div class="line"><span class="lineno">  103</span>            }</div>
<div class="line"><span class="lineno">  104</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  105</span>        }</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>        <span class="comment">// If the AT command buffer overflows we abandon</span></div>
<div class="line"><span class="lineno">  108</span>        <span class="comment">// AT mode and return to passthrough mode; this is</span></div>
<div class="line"><span class="lineno">  109</span>        <span class="comment">// to minimise the risk of locking up on reception</span></div>
<div class="line"><span class="lineno">  110</span>        <span class="comment">// of an accidental escape sequence.</span></div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>        <a class="code hl_variable" href="at_8c.html#a5038e1fea7c7cdf587ff60181132e264">at_mode_active</a> = 0;</div>
<div class="line"><span class="lineno">  113</span>        <a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a> = 0;</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  115</span>    }</div>
<div class="line"><span class="lineno">  116</span>}</div>
<div class="ttc" id="aat_8h_html_a2865f9a4b565a3471f24e65beb540ca3"><div class="ttname"><a href="at_8h.html#a2865f9a4b565a3471f24e65beb540ca3">AT_CMD_MAXLEN</a></div><div class="ttdeci">#define AT_CMD_MAXLEN</div><div class="ttdef"><b>Definition:</b> <a href="at_8h_source.html#l00081">at.h:81</a></div></div>
<div class="ttc" id="aradio_8h_html_ab3cc91b237b56d9ae053be2ecc2075ca"><div class="ttname"><a href="radio_8h.html#ab3cc91b237b56d9ae053be2ecc2075ca">putchar</a></div><div class="ttdeci">void putchar(char c) __reentrant</div><div class="ttdef"><b>Definition:</b> <a href="serial_8c_source.html#l00541">serial.c:541</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at_8h_aed1a02faa3672eac5629a1fc5dca1f34_cgraph.png" border="0" usemap="#aat_8h_aed1a02faa3672eac5629a1fc5dca1f34_cgraph" alt=""/></div>
<map name="aat_8h_aed1a02faa3672eac5629a1fc5dca1f34_cgraph" id="aat_8h_aed1a02faa3672eac5629a1fc5dca1f34_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,73,32"/>
<area shape="rect" href="serial_8c.html#ab3cc91b237b56d9ae053be2ecc2075ca" title=" " alt="" coords="121,5,187,32"/>
<area shape="rect" href="serial_8c.html#a21c4356129a6f7e86d976086a6bbe833" title=" " alt="" coords="235,5,329,32"/>
<area shape="rect" href="serial_8c.html#a560761b0ad465293b81a6e0ac9679e83" title=" " alt="" coords="377,5,475,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at_8h_aed1a02faa3672eac5629a1fc5dca1f34_icgraph.png" border="0" usemap="#aat_8h_aed1a02faa3672eac5629a1fc5dca1f34_icgraph" alt=""/></div>
<map name="aat_8h_aed1a02faa3672eac5629a1fc5dca1f34_icgraph" id="aat_8h_aed1a02faa3672eac5629a1fc5dca1f34_icgraph">
<area shape="rect" title=" " alt="" coords="160,5,228,32"/>
<area shape="rect" href="serial_8c.html#abf25dba858661de8b55c6a40224627a1" title=" " alt="" coords="5,5,112,32"/>
</map>
</div>

</div>
</div>
<a id="a3a88fb008ed83c048103a284f238c233" name="a3a88fb008ed83c048103a284f238c233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a88fb008ed83c048103a284f238c233">&#9670;&nbsp;</a></span>at_plus_detector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at_plus_detector </td>
          <td>(</td>
          <td class="paramtype">register uint8_t&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >+++ detector. Handles the state machine for detecting the AT escape sequence.</p>
<p >Call this at interrupt time for every incoming character when at_mode_active is false.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>Received character. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00145">145</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  146</span>{</div>
<div class="line"><span class="lineno">  147</span>    <span class="comment">// If we get a character that&#39;s not &#39;+&#39;, unconditionally</span></div>
<div class="line"><span class="lineno">  148</span>    <span class="comment">// reset the state machine to wait-for-idle; this will</span></div>
<div class="line"><span class="lineno">  149</span>    <span class="comment">// restart the 1S timer.</span></div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">if</span> (c != (uint8_t)<span class="charliteral">&#39;+&#39;</span>)</div>
<div class="line"><span class="lineno">  152</span>        <a class="code hl_variable" href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a> = <a class="code hl_define" href="at_8c.html#a07e26eaf012fd13e6bc10c0304f94910">ATP_WAIT_FOR_IDLE</a>;</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>    <span class="comment">// We got a plus; handle it based on our current state.</span></div>
<div class="line"><span class="lineno">  155</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a>) {</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="at_8c.html#a1859c0ed5386d61516a199b5435b7d65">ATP_WAIT_FOR_PLUS1</a>:</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="at_8c.html#a822d4475b3f7a2ae8690fc0e0abe83a3">ATP_WAIT_FOR_PLUS2</a>:</div>
<div class="line"><span class="lineno">  160</span>        <a class="code hl_variable" href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a>++;</div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="at_8c.html#a3c453ea5015fd2a433416ad31403c55c">ATP_WAIT_FOR_PLUS3</a>:</div>
<div class="line"><span class="lineno">  164</span>        <a class="code hl_variable" href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a> = <a class="code hl_define" href="at_8c.html#a22e818a0d5a9c275f66c9f9ae4612410">ATP_WAIT_FOR_ENABLE</a>;</div>
<div class="line"><span class="lineno">  165</span>        <a class="code hl_variable" href="at_8c.html#aa64e2f68727608b9e71d290d3aeeed0c">at_plus_counter</a> = <a class="code hl_define" href="at_8c.html#ac307ffc861c0b735fc16f4d8780844c6">ATP_COUNT_1S</a>;</div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  167</span> </div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  169</span>        <a class="code hl_variable" href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a> = <a class="code hl_define" href="at_8c.html#a07e26eaf012fd13e6bc10c0304f94910">ATP_WAIT_FOR_IDLE</a>;</div>
<div class="line"><span class="lineno">  170</span>        <span class="comment">// FALLTHROUGH</span></div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="at_8c.html#a07e26eaf012fd13e6bc10c0304f94910">ATP_WAIT_FOR_IDLE</a>:</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="at_8c.html#a22e818a0d5a9c275f66c9f9ae4612410">ATP_WAIT_FOR_ENABLE</a>:</div>
<div class="line"><span class="lineno">  173</span>        <a class="code hl_variable" href="at_8c.html#aa64e2f68727608b9e71d290d3aeeed0c">at_plus_counter</a> = <a class="code hl_define" href="at_8c.html#ac307ffc861c0b735fc16f4d8780844c6">ATP_COUNT_1S</a>;</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  175</span>    }</div>
<div class="line"><span class="lineno">  176</span>}</div>
<div class="ttc" id="aat_8c_html_a07e26eaf012fd13e6bc10c0304f94910"><div class="ttname"><a href="at_8c.html#a07e26eaf012fd13e6bc10c0304f94910">ATP_WAIT_FOR_IDLE</a></div><div class="ttdeci">#define ATP_WAIT_FOR_IDLE</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00131">at.c:131</a></div></div>
<div class="ttc" id="aat_8c_html_a1859c0ed5386d61516a199b5435b7d65"><div class="ttname"><a href="at_8c.html#a1859c0ed5386d61516a199b5435b7d65">ATP_WAIT_FOR_PLUS1</a></div><div class="ttdeci">#define ATP_WAIT_FOR_PLUS1</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00132">at.c:132</a></div></div>
<div class="ttc" id="aat_8c_html_a22e818a0d5a9c275f66c9f9ae4612410"><div class="ttname"><a href="at_8c.html#a22e818a0d5a9c275f66c9f9ae4612410">ATP_WAIT_FOR_ENABLE</a></div><div class="ttdeci">#define ATP_WAIT_FOR_ENABLE</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00135">at.c:135</a></div></div>
<div class="ttc" id="aat_8c_html_a38feb5ba8d12edd314cb332f11e9b682"><div class="ttname"><a href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a></div><div class="ttdeci">static __pdata uint8_t at_plus_state</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00139">at.c:139</a></div></div>
<div class="ttc" id="aat_8c_html_a3c453ea5015fd2a433416ad31403c55c"><div class="ttname"><a href="at_8c.html#a3c453ea5015fd2a433416ad31403c55c">ATP_WAIT_FOR_PLUS3</a></div><div class="ttdeci">#define ATP_WAIT_FOR_PLUS3</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00134">at.c:134</a></div></div>
<div class="ttc" id="aat_8c_html_a822d4475b3f7a2ae8690fc0e0abe83a3"><div class="ttname"><a href="at_8c.html#a822d4475b3f7a2ae8690fc0e0abe83a3">ATP_WAIT_FOR_PLUS2</a></div><div class="ttdeci">#define ATP_WAIT_FOR_PLUS2</div><div class="ttdef"><b>Definition:</b> <a href="at_8c_source.html#l00133">at.c:133</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at_8h_a3a88fb008ed83c048103a284f238c233_icgraph.png" border="0" usemap="#aat_8h_a3a88fb008ed83c048103a284f238c233_icgraph" alt=""/></div>
<map name="aat_8h_a3a88fb008ed83c048103a284f238c233_icgraph" id="aat_8h_a3a88fb008ed83c048103a284f238c233_icgraph">
<area shape="rect" title=" " alt="" coords="160,5,279,32"/>
<area shape="rect" href="serial_8c.html#abf25dba858661de8b55c6a40224627a1" title=" " alt="" coords="5,5,112,32"/>
</map>
</div>

</div>
</div>
<a id="a53dee99a19080dacf6a8d0bb9e4f363c" name="a53dee99a19080dacf6a8d0bb9e4f363c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53dee99a19080dacf6a8d0bb9e4f363c">&#9670;&nbsp;</a></span>at_timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at_timer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Timer tick handler for the AT command interpreter </p>

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00182">182</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  183</span>{</div>
<div class="line"><span class="lineno">  184</span>    <span class="comment">// if the counter is running</span></div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="at_8c.html#aa64e2f68727608b9e71d290d3aeeed0c">at_plus_counter</a> &gt; 0) {</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>        <span class="comment">// if it reaches zero, the timeout has expired</span></div>
<div class="line"><span class="lineno">  188</span>        <span class="keywordflow">if</span> (--<a class="code hl_variable" href="at_8c.html#aa64e2f68727608b9e71d290d3aeeed0c">at_plus_counter</a> == 0) {</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>            <span class="comment">// make the relevant state change</span></div>
<div class="line"><span class="lineno">  191</span>            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a>) {</div>
<div class="line"><span class="lineno">  192</span>            <span class="keywordflow">case</span> <a class="code hl_define" href="at_8c.html#a07e26eaf012fd13e6bc10c0304f94910">ATP_WAIT_FOR_IDLE</a>:</div>
<div class="line"><span class="lineno">  193</span>                <a class="code hl_variable" href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a> = <a class="code hl_define" href="at_8c.html#a1859c0ed5386d61516a199b5435b7d65">ATP_WAIT_FOR_PLUS1</a>;</div>
<div class="line"><span class="lineno">  194</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>            <span class="keywordflow">case</span> <a class="code hl_define" href="at_8c.html#a22e818a0d5a9c275f66c9f9ae4612410">ATP_WAIT_FOR_ENABLE</a>:</div>
<div class="line"><span class="lineno">  197</span>                <a class="code hl_variable" href="at_8c.html#a5038e1fea7c7cdf587ff60181132e264">at_mode_active</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  198</span>                <a class="code hl_variable" href="at_8c.html#a38feb5ba8d12edd314cb332f11e9b682">at_plus_state</a> = <a class="code hl_define" href="at_8c.html#a07e26eaf012fd13e6bc10c0304f94910">ATP_WAIT_FOR_IDLE</a>;</div>
<div class="line"><span class="lineno">  199</span> </div>
<div class="line"><span class="lineno">  200</span>                <span class="comment">// stuff an empty &#39;AT&#39; command to get the OK prompt</span></div>
<div class="line"><span class="lineno">  201</span>                <a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[0] = <span class="charliteral">&#39;A&#39;</span>;</div>
<div class="line"><span class="lineno">  202</span>                <a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[1] = <span class="charliteral">&#39;T&#39;</span>;</div>
<div class="line"><span class="lineno">  203</span>                <a class="code hl_variable" href="at_8c.html#aeb257db0c8aea4d68b9548d31ed90871">at_cmd</a>[2] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno">  204</span>                <a class="code hl_variable" href="at_8c.html#acf6209395976e983a53864bfc4b77deb">at_cmd_len</a> = 2;</div>
<div class="line"><span class="lineno">  205</span>                <a class="code hl_variable" href="at_8c.html#adac8a82c271daff8c5b330ebcd38ee43">at_cmd_ready</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  206</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  207</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  208</span>                <span class="comment">// should never happen, but otherwise harmless</span></div>
<div class="line"><span class="lineno">  209</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  210</span>            }</div>
<div class="line"><span class="lineno">  211</span>        }</div>
<div class="line"><span class="lineno">  212</span>    }</div>
<div class="line"><span class="lineno">  213</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at_8h_a53dee99a19080dacf6a8d0bb9e4f363c_icgraph.png" border="0" usemap="#aat_8h_a53dee99a19080dacf6a8d0bb9e4f363c_icgraph" alt=""/></div>
<map name="aat_8h_a53dee99a19080dacf6a8d0bb9e4f363c_icgraph" id="aat_8h_a53dee99a19080dacf6a8d0bb9e4f363c_icgraph">
<area shape="rect" title=" " alt="" coords="147,5,216,32"/>
<area shape="rect" href="timer_8c.html#a34bcf8d2727df215ff18ed8667b84010" title=" " alt="" coords="5,5,99,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aeb257db0c8aea4d68b9548d31ed90871" name="aeb257db0c8aea4d68b9548d31ed90871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb257db0c8aea4d68b9548d31ed90871">&#9670;&nbsp;</a></span>at_cmd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__xdata char at_cmd[<a class="el" href="at_8h.html#a2865f9a4b565a3471f24e65beb540ca3">AT_CMD_MAXLEN</a>+1]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00051">51</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>

</div>
</div>
<a id="acf6209395976e983a53864bfc4b77deb" name="acf6209395976e983a53864bfc4b77deb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf6209395976e983a53864bfc4b77deb">&#9670;&nbsp;</a></span>at_cmd_len</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__pdata uint8_t at_cmd_len</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00052">52</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>

</div>
</div>
<a id="adac8a82c271daff8c5b330ebcd38ee43" name="adac8a82c271daff8c5b330ebcd38ee43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adac8a82c271daff8c5b330ebcd38ee43">&#9670;&nbsp;</a></span>at_cmd_ready</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool at_cmd_ready</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>if true, at_cmd / at_cmd_len contain valid data </p>

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00056">56</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>

</div>
</div>
<a id="a5038e1fea7c7cdf587ff60181132e264" name="a5038e1fea7c7cdf587ff60181132e264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5038e1fea7c7cdf587ff60181132e264">&#9670;&nbsp;</a></span>at_mode_active</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool at_mode_active</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>if true, the AT interpreter is in command mode </p>
<p >if true, the AT interpreter is in command mode </p>

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00055">55</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>

</div>
</div>
<a id="acdb7a227e58b2b7f0c3d7a3d4b101b74" name="acdb7a227e58b2b7f0c3d7a3d4b101b74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdb7a227e58b2b7f0c3d7a3d4b101b74">&#9670;&nbsp;</a></span>at_testmode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__pdata uint8_t at_testmode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>AT_TEST_* test modes. </p>
<p >AT_TEST_* bits</p>
<p >AT_TEST_* test modes. </p>

<p class="definition">Definition at line <a class="el" href="at_8c_source.html#l00059">59</a> of file <a class="el" href="at_8c_source.html">at.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_167790342fb55959539d550b874be046.html">project</a></li><li class="navelem"><a class="el" href="dir_1f2ad38bfb88044c84a19a4ab80ce531.html">Firmware</a></li><li class="navelem"><a class="el" href="dir_412cb633748d7ebdc68292eb7d392d68.html">radio</a></li><li class="navelem"><a class="el" href="at_8h.html">at.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
